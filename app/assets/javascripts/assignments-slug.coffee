charMap =
  'À': 'a',
  'Á': 'a'
  'Â': 'a'
  'Ã': 'a'
  'Ä': 'a'
  'Å': 'a'
  'Æ': 'ae'
  'Ç': 'c'
  'È': 'e'
  'É': 'e'
  'Ê': 'e'
  'Ë': 'e'
  'Ì': 'i'
  'Í': 'i'
  'Î': 'i'
  'Ï': 'i'
  'Ð': 'd'
  'Ñ': 'n'
  'Ò': 'o'
  'Ó': 'o'
  'Ô': 'o'
  'Õ': 'o'
  'Ö': 'o'
  'Ő': 'o'
  'Ø': 'o'
  'Ù': 'u'
  'Ú': 'u'
  'Û': 'u'
  'Ü': 'u'
  'Ű': 'u'
  'Ý': 'y'
  'Þ': 'th'
  'ß': 'ss'
  'à': 'a'
  'á': 'a'
  'â': 'a'
  'ã': 'a'
  'ä': 'a'
  'å': 'a'
  'æ': 'ae'
  'ç': 'c'
  'è': 'e'
  'é': 'e'
  'ê': 'e'
  'ë': 'e'
  'ì': 'i'
  'í': 'i'
  'î': 'i'
  'ï': 'i'
  'ð': 'd'
  'ñ': 'n'
  'ò': 'o'
  'ó': 'o'
  'ô': 'o'
  'õ': 'o'
  'ö': 'o'
  'ő': 'o'
  'ø': 'o'
  'ù': 'u'
  'ú': 'u'
  'û': 'u'
  'ü': 'u'
  'ű': 'u'
  'ý': 'y'
  'þ': 'th'
  'ÿ': 'y'
  'ẞ': 'SS'
  'α': 'a'
  'β': 'b'
  'γ': 'g'
  'δ': 'd'
  'ε': 'e'
  'ζ': 'z'
  'η': 'h'
  'θ': '8'
  'ι': 'i'
  'κ': 'k'
  'λ': 'l'
  'μ': 'm'
  'ν': 'n'
  'ξ': '3'
  'ο': 'o'
  'π': 'p'
  'ρ': 'r'
  'σ': 's'
  'τ': 't'
  'υ': 'y'
  'φ': 'f'
  'χ': 'x'
  'ψ': 'ps'
  'ω': 'w'
  'ά': 'a'
  'έ': 'e'
  'ί': 'i'
  'ό': 'o'
  'ύ': 'y'
  'ή': 'h'
  'ώ': 'w'
  'ς': 's'
  'ϊ': 'i'
  'ΰ': 'y'
  'ϋ': 'y'
  'ΐ': 'i'
  'Α': 'a'
  'Β': 'b'
  'Γ': 'g'
  'Δ': 'd'
  'Ε': 'e'
  'Ζ': 'z'
  'Η': 'h'
  'Θ': '8'
  'Ι': 'i'
  'Κ': 'k'
  'Λ': 'l'
  'Μ': 'm'
  'Ν': 'n'
  'Ξ': '3'
  'Ο': 'o'
  'Π': 'p'
  'Ρ': 'r'
  'Σ': 's'
  'Τ': 't'
  'Υ': 'y'
  'Φ': 'f'
  'Χ': 'x'
  'Ψ': 'ps'
  'Ω': 'w'
  'Ά': 'a'
  'Έ': 'e'
  'Ί': 'i'
  'Ό': 'o'
  'Ύ': 'y'
  'Ή': 'h'
  'Ώ': 'w'
  'Ϊ': 'i'
  'Ϋ': 'y'
  'ş': 's'
  'Ş': 's'
  'ı': 'i'
  'İ': 'i'
  'ç': 'c'
  'Ç': 'c'
  'ü': 'u'
  'Ü': 'u'
  'ö': 'o'
  'Ö': 'o'
  'ğ': 'g'
  'Ğ': 'g'
  'а': 'a'
  'б': 'b'
  'в': 'v'
  'г': 'g'
  'д': 'd'
  'е': 'e'
  'ё': 'yo'
  'ж': 'zh'
  'з': 'z'
  'и': 'i'
  'й': 'j'
  'к': 'k'
  'л': 'l'
  'м': 'm'
  'н': 'n'
  'о': 'o'
  'п': 'p'
  'р': 'r'
  'с': 's'
  'т': 't'
  'у': 'u'
  'ф': 'f'
  'х': 'h'
  'ц': 'c'
  'ч': 'ch'
  'ш': 'sh'
  'щ': 'sh'
  'ъ': 'u'
  'ы': 'y'
  'ь': ''
  'э': 'e'
  'ю': 'yu'
  'я': 'ya'
  'А': 'a'
  'Б': 'b'
  'В': 'v'
  'Г': 'g'
  'Д': 'd'
  'Е': 'e'
  'Ё': 'yo'
  'Ж': 'zh'
  'З': 'z'
  'И': 'i'
  'Й': 'j'
  'К': 'k'
  'Л': 'l'
  'М': 'm'
  'Н': 'n'
  'О': 'o'
  'П': 'p'
  'Р': 'r'
  'С': 's'
  'Т': 't'
  'У': 'u'
  'Ф': 'f'
  'Х': 'h'
  'Ц': 'c'
  'Ч': 'ch'
  'Ш': 'sh'
  'Щ': 'sh'
  'Ъ': 'u'
  'Ы': 'y'
  'Ь': ''
  'Э': 'e'
  'Ю': 'yu'
  'Я': 'ya'
  'Є': 'ye'
  'І': 'i'
  'Ї': 'yi'
  'Ґ': 'g'
  'є': 'ye'
  'і': 'i'
  'ї': 'yi'
  'ґ': 'g'
  'č': 'c'
  'ď': 'd'
  'ě': 'e'
  'ň': 'n'
  'ř': 'r'
  'š': 's'
  'ť': 't'
  'ů': 'u'
  'ž': 'z'
  'Č': 'c'
  'Ď': 'd'
  'Ě': 'e'
  'Ň': 'n'
  'Ř': 'r'
  'Š': 's'
  'Ť': 't'
  'Ů': 'u'
  'Ž': 'z'
  'ą': 'a'
  'ć': 'c'
  'ę': 'e'
  'ł': 'l'
  'ń': 'n'
  'ó': 'o'
  'ś': 's'
  'ź': 'z'
  'ż': 'z'
  'Ą': 'a'
  'Ć': 'c'
  'Ę': 'e'
  'Ł': 'l'
  'Ń': 'n'
  'Ś': 's'
  'Ź': 'z'
  'Ż': 'z'
  'ā': 'a'
  'č': 'c'
  'ē': 'e'
  'ģ': 'g'
  'ī': 'i'
  'ķ': 'k'
  'ļ': 'l'
  'ņ': 'n'
  'š': 's'
  'ū': 'u'
  'ž': 'z'
  'Ā': 'a'
  'Č': 'c'
  'Ē': 'e'
  'Ģ': 'g'
  'Ī': 'i'
  'Ķ': 'k'
  'Ļ': 'l'
  'Ņ': 'n'
  'Š': 's'
  'Ū': 'u'
  'Ž': 'z'
  '€': 'euro'
  '₢': 'cruzeiro'
  '₣': 'french franc'
  '£': 'pound'
  '₤': 'lira'
  '₥': 'mill'
  '₦': 'naira'
  '₧': 'peseta'
  '₨': 'rupee'
  '₩': 'won'
  '₪': 'new shequel'
  '₫': 'dong'
  '₭': 'kip'
  '₮': 'tugrik'
  '₯': 'drachma'
  '₰': 'penny'
  '₱': 'peso'
  '₲': 'guarani'
  '₳': 'austral'
  '₴': 'hryvnia'
  '₵': 'cedi'
  '¢': 'cent'
  '¥': 'yen'
  '元': 'yuan'
  '円': 'yen'
  '﷼': 'rial'
  '₠': 'ecu'
  '¤': 'currency'
  '฿': 'baht'
  '$': 'dollar'
  '©': 'c'
  'œ': 'oe'
  'Œ': 'oe'
  '∑': 'sum'
  '®': 'r'
  '†': '+'
  '“': '-'
  '”': '-'
  '‘': '-'
  '’': '-'
  '∂': 'd'
  'ƒ': 'f'
  '™': 'tm'
  '℠': 'sm'
  '…': '-'
  '˚': 'o'
  'º': 'o'
  'ª': 'a'
  '•': '-'
  '∆': 'delta'
  '∞': 'infinity'
  '♥': 'love'
  '&': 'and'
  '|': 'or'
  '<': 'less'
  '>': 'greater'

urlify = (string, replacement) ->
    string.split('').reduce(((result, ch) ->
      if charMap[ch]
        ch = charMap[ch]
      ch = ch.toLowerCase().replace(/[^a-z0-9]+/g,'-')
      result += ch
      result
    ), '').replace(/^\s+|\s+$/g, '').replace(/[-\s]+/g, replacement or '-').replace '#{replacement}$', ''

$('.assignments').ready( ->
  $('#assignment_title').on('change paste keyup click', ->
    $('#assignment_slug').val(urlify($('#assignment_title').val()));
  )
)

$('.group_assignments').ready( ->
  $('#group_assignment_title').on('change paste keyup click', ->
    $('#group_assignment_slug').val(urlify($('#group_assignment_title').val()));
  )
)

